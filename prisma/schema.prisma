// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//draw diagram

model User {
  id              String  @id @default(uuid())
  firstName       String
  lastName        String
  email           String
  password        String
  tags            Tag[]
  favouriteShops  Shop[]
  favouriteEvents Event[]
}

model ShopOwner {
  id        String @id @default(uuid())
  firstName String
  lastName  String
  email     String
  password  String
  shop      Shop?
  shopId    String
}

model EventOrganizer {
  id          String  @id @default(uuid())
  companyName String
  email       String
  password    String
  events      Event[]
}

model Shop {
  id                  String    @id @default(uuid())
  shopName            String
  about               String
  address             String
  picture             String
  tags                Tag[]
  telephone           String
  facebook            String?
  instagram           String?
  line                String?
  shopOwner           ShopOwner @relation(fields: [shopOwnerId], references: [id])
  shopOwnerId         String    @unique
  eventApplications   Event[]   @relation("Application")
  eventParticipations Event[]   @relation("Participation")
  favouriteByUser     User[]
  products            Product[]
}

model Event {
  id                 String          @id @default(uuid())
  eventName          String
  about              String
  location           String
  picture            String
  tags               Tag[]
  startDate          DateTime
  endDate            DateTime
  telephone          String
  facebook           String?
  instagram          String?
  line               String?
  eventOrganizer     EventOrganizer? @relation(fields: [eventOrganizerId], references: [id])
  eventOrganizerId   String?
  shopApplications   Shop[]          @relation("Application")
  shopParticipations Shop[]          @relation("Participation")
  favouriteByUser    User[]
}

model Product {
  id          String  @id @default(uuid())
  productName String
  description String
  price       Int
  shop        Shop?   @relation(fields: [shopId], references: [id])
  shopId      String?
}

model Tag {
  id      Int     @id @default(autoincrement())
  tagName String
  user    User[]
  Shop    Shop[]
  Event   Event[]
}
